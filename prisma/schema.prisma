generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Order {
  id            String      @id @default(cuid())
  dailyNumber   Int      // número sequencial do dia
  dateKey       String   // chave diária para reset (ex: 2025-11-10)
  email         String?
  totalAmount   Int
  tipAmount Int?    // em centavos
  baseTotal Int?    // subtotal + tax (sem tip)
  currency      String      @default("USD")
  squareId      String      @unique
  squareOrder   String? 
  receiptUrl    String?
  status        String      @default("PENDING")
  createdAt     DateTime    @default(now())
  items         OrderItem[]
}

model OrderItem {
  id              String   @id @default(cuid())
  order           Order    @relation(fields: [orderId], references: [id])
  orderId         String
  name            String
  variationId     String?
  price           Float
  quantity        Int
  addons          String?
  specialRequest  String?
}
